# Updated app.py

# Existing code...

# Capture device_id and device_branch when processing attendance records

def process_attendance_record(record):
    device_id = record.get('device_id')  # Get device_id from record
    device_branch = record.get('device_branch')  # Get device_branch from record
    # Existing processing logic...

# Remaining code...